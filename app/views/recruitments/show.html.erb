<p id="notice"><%= notice %></p>

<h1>
  <%= @recruitment.title %>
</h1>

<p>
  <%= image_tag(@url, :size => '100x100') %>
</p>

<p>
  <% @recruitment.interest_list.each do |tag| %>
    <span class="badge badge-success"><%= tag %></span>
  <% end %>
</p>

<p>
  <% @recruitment.industry_list.each do |tag| %>
    <span class="badge badge-primary"><%= tag %></span>
  <% end %>
</p>

<h1>
  何をやるの？
</h1>

<div>
  <%= @recruitment.body %>
</div>

<h1>
  どんな会社？
</h1>

<div>
  <%= @recruitment.culture %>
</div>

<h1>
  職場体験詳細
</h1>

<p>
  <%= @recruitment.company.name %>
</p>

<p>
  <strong>場所:</strong>
  <%= @recruitment.prefecture %>
  <%= @recruitment.city %>
  <%= @recruitment.street %>
</p>

<%# mapのサイズ等cssは recruitment.scssに書いてある %>
<div id="map"></div>
<script>
  var map;
  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: -34.397, lng: 150.644},
      zoom: 8
    });
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBQAUZYIeNh0s2pU9gx5LYUwXBCt3I08OI&callback=initMap"
async defer></script>

<p>
  <strong>日程:</strong>
  <%= @recruitment.schedule.year %>
  年
  <%= @recruitment.schedule.mon %>
  月
  <%= @recruitment.schedule.day %>
  日
</p>

<p>
  <strong>時間:</strong>
  <%= @recruitment.start_time.hour %>
  :
  <%= @recruitment.start_time.min %>
  ~
  <%= @recruitment.end_time.hour %>
  :
  <%= @recruitment.end_time.min %>
</p>

<p>
  <strong>応募締め切り:</strong>
  <%= @recruitment.deadline.year %>
  年
  <%= @recruitment.deadline.mon %>
  月
  <%= @recruitment.deadline.day %>
  日
</p>

<% if current_user %>
  <%# binding.pry %>
  <% if current_user.entries.where(recruitment_id: @recruitment.id).exists? %>
    <div class = "btn">
      <%= link_to('応募済み', entries_destroy_path(@recruitment.id), class: :'btn btn-secondary float-right disabled') %>
    </div>

  <% else %>
    <div class = "btn">
      <%= link_to('応募する', new_entry_path(@recruitment.id), class: :'btn btn-info float-right') %>
    </div>
  <% end %>

  <% if current_user.stocks.where(recruitment_id: @recruitment.id).exists? %>
    <div class = "btn">
      <%= link_to('ストック済み', stocks_destroy_path(@recruitment.id), class: :'btn btn-success float-right', id: "#{@recruitment.id}", remote: true) %>
    </div>

  <% else %>
    <div class = "btn">
      <%= link_to('ストックする', stocks_create_path(@recruitment.id), class: :'btn btn-success float-right', id: "#{@recruitment.id}", remote: true) %>
    </div>
  <% end %>
  
<% else %>
  <div class = "btn">
    <%= link_to('応募する', login_index_path, class: :'btn btn-info float-right') %>
  </div>

  <div class = "btn">
    <%= link_to('ストックする', login_index_path, class: :'btn btn-success float-right') %>
  </div>
<% end %>